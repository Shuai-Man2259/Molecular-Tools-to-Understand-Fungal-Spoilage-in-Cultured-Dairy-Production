#!/bin/bash

# Load the FLASH module or add FLASH to your PATH if not already done
# module load flash

# Define the output directory for merged reads
output_dir="merged_reads"
mkdir -p ${output_dir}

# List of read files (adjust if your naming convention differs)
reads=(
"Mucor_WGS_A01_1_10475491_22MKWLLT3_L1"
"Mucor_WGS_A02_11_10475491_22MKWLLT3_L1"
"Mucor_WGS_A03_21_10475491_22MKWLLT3_L1"
"Mucor_WGS_A04_31_10475491_22MKWLLT3_L1"
"Mucor_WGS_A05_39_10475491_22MKWLLT3_L1"
"Mucor_WGS_B01_4_10475491_22MKWLLT3_L1"
"Mucor_WGS_B02_12_10475491_22MKWLLT3_L1"
"Mucor_WGS_B03_22_10475491_22MKWLLT3_L1"
"Mucor_WGS_B04_32_10475491_22MKWLLT3_L1"
"Mucor_WGS_B05_40_10475491_22MKWLLT3_L1"
"Mucor_WGS_C01_5_10475491_22MKWLLT3_L1"
"Mucor_WGS_C02_13_10475491_22MKWLLT3_L1"
"Mucor_WGS_C03_23_10475491_22MKWLLT3_L1"
"Mucor_WGS_C04_33_10475491_22MKWLLT3_L1"
"Mucor_WGS_C05_41_10475491_22MKWLLT3_L1"
"Mucor_WGS_D01_6_10475491_22MKWLLT3_L1"
"Mucor_WGS_D02_14_10475491_22MKWLLT3_L1"
"Mucor_WGS_D03_24_10475491_22MKWLLT3_L1"
"Mucor_WGS_D04_34_10475491_22MKWLLT3_L1"
"Mucor_WGS_D05_42_10475491_22MKWLLT3_L1"
"Mucor_WGS_E01_7_10475491_22MKWLLT3_L1"
"Mucor_WGS_E02_15_10475491_22MKWLLT3_L1"
"Mucor_WGS_E03_26_10475491_22MKWLLT3_L1"
"Mucor_WGS_E04_35_10475491_22MKWLLT3_L1"
"Mucor_WGS_E05_43_10475491_22MKWLLT3_L1"
"Mucor_WGS_F01_8_10475491_22MKWLLT3_L1"
"Mucor_WGS_F02_17_10475491_22MKWLLT3_L1"
"Mucor_WGS_F03_27_10475491_22MKWLLT3_L1"
"Mucor_WGS_F04_36_10475491_22MKWLLT3_L1"
"Mucor_WGS_F05_46_10475491_22MKWLLT3_L1"
"Mucor_WGS_G01_9_10475491_22MKWLLT3_L1"
"Mucor_WGS_G02_18_10475491_22MKWLLT3_L1"
"Mucor_WGS_G03_28_10475491_22MKWLLT3_L1"
"Mucor_WGS_G04_37_10475491_22MKWLLT3_L1"
"Mucor_WGS_G05_47_10475491_22MKWLLT3_L1"
"Mucor_WGS_H01_10_10475491_22MKWLLT3_L1"
"Mucor_WGS_H02_20_10475491_22MKWLLT3_L1"
"Mucor_WGS_H03_30_10475491_22MKWLLT3_L1"
"Mucor_WGS_H04_38_10475491_22MKWLLT3_L1"
"Mucor_WGS_H05_48_10475491_22MKWLLT3_L1"
)

# Loop through each read pair and merge
for read in "${reads[@]}"; do
    echo "Processing ${read}..."
    /programs/FLASH2/flash2 -z -o ${output_dir}/${read}_merged ${read}_R1_unpaired.fastq.gz ${read}_R2_unpaired.fastq.gz
done
